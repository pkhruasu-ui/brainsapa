function tsort(e){var t={},n=[],r={},i=function(e){this.id=e,this.afters=[]};return e.forEach(function(
e){var n=e[0],r=e[1];t[n]||(t[n]=new i(n)),t[r]||(t[r]=new i(r)),t[n].afters.push(r)}),Object.keys(t)
.forEach(function s(e,i){var o=t[e],u=o.id;if(r[e])return;Array.isArray(i)||(i=[]),i.push(u),r[e]=!0,
o.afters.forEach(function(e){if(i.indexOf(e)>=0)throw new Error("closed chain : "+e+" is in "+u);s(e.
toString(),i.map(function(e){return e}))}),n.unshift(u)}),n}function tsortTest(){function s(e){return Math
.floor(Math.random()*e)+1}var e=[[1,2],[1,3],[2,4],[3,4]],t=tsort(e);console.log("Sorted:",t),e=[["A"
,"B"],["B","C"],["C","D"]];try{console.log(tsort(e))}catch(n){console.log(n.message)}return;var r,i}typeof 
exports=="object"&&exports===this&&(module.exports=tsort,process.argv[1]===__filename&&tsortTest());